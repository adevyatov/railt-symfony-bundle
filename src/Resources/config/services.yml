services:
    ##############################################################
    # Register DI Container
    # ============================================================
    #
    # For correct operation of autowiring for methods it is
    # required to register the DI Container as a Symfony service.
    #
    # As a proxy, it is transmitted compatible with the PSR in
    # order that the controller's methods have access to
    # the original Symfony services.
    #
    ##############################################################

    Railt\Container\Container:
        arguments: ['@service_container']

    Railt\Container\ContainerInterface:
        alias: Railt\Container\Container

    ##############################################################
    # Register the Railt Application Configurator
    # ============================================================
    #
    # TODO Add a description
    #
    ##############################################################

#    Phplrt\Io\File:
#        factory: Phplrt\Io\File::fromPathname
#        arguments: ['%railt.schema%']
#
#    Railt\Io\Readable:
#        alias: Phplrt\Io\File

    Railt\Foundation\ApplicationInterface:
        alias: Railt\Foundation\Application

    Railt\Foundation\Application:
        arguments:
            - '%kernel.debug%'
            - '@Railt\Container\ContainerInterface'

#    Railt\Foundation\Application\Configurator:
#        factory: ['Railt\Foundation\Application\Configurator', 'getInstance']
#        calls:
#            - method: setContainer
#              arguments: ['@Railt\Container\ContainerInterface']
#            - method: setDebugMode
#              arguments: ['%railt.debug%']
#            - method: setExtensions
#              arguments: ['%railt.extensions%']
#            - method: setAutoloadPaths
#              arguments: ['%railt.autoload%']
#            - method: setSchema
#              arguments: ['@Railt\Io\Readable']


    Railt\SymfonyBundle\Config:
        arguments:
            - '@service_container'

    Railt\SymfonyBundle\Controller\GraphQLController:
        autowire: true
        tags: ['controller.service_arguments']

    Railt\SymfonyBundle\Storage\PSR6StorageBridge:
        public: true
        arguments:
            - '@Psr\Cache\CacheItemPoolInterface'
